!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet"],i):i((t.L=t.L||{},t.L.hotline=t.L.hotline||{}),t.L)}(this,function(t,i){"use strict";function e(t,e,n,o,h){var r,s,l,a=o?this._lastCode:i.LineUtil._getBitCode(t,n),u=i.LineUtil._getBitCode(e,n);for(this._lastCode=u;;){if(!(a|u))return[t,e];if(a&u)return!1;r=a||u,s=i.LineUtil._getEdgeIntersection(t,e,r,n,h),l=i.LineUtil._getBitCode(s,n),r===a?(s.z=t.z,t=s,a=l):(s.z=e.z,e=s,u=l)}}i="default"in i?i.default:i;var n=function(t){if(!(this instanceof n))return new n(t);var i={0:"green",.5:"yellow",1:"red"};this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._weight=5,this._outlineWidth=1,this._outlineColor="black",this._min=0,this._max=1,this._data=[],this.palette(i)};n.prototype={width:function(t){return this._width=t,this},height:function(t){return this._height=t,this},weight:function(t){return this._weight=t,this},outlineWidth:function(t){return this._outlineWidth=t,this},outlineColor:function(t){return this._outlineColor=t,this},palette:function(t){var i=document.createElement("canvas"),e=i.getContext("2d"),n=e.createLinearGradient(0,0,0,256);i.width=1,i.height=256;for(var o in t)n.addColorStop(o,t[o]);return e.fillStyle=n,e.fillRect(0,0,1,256),this._palette=e.getImageData(0,0,1,256).data,this},min:function(t){return this._min=t,this},max:function(t){return this._max=t,this},data:function(t){return this._data=t,this},add:function(t){return this._data.push(t),this},clear:function(t){return t&&(this._data=[]),this._ctx.clearRect(0,0,this._width,this._height),this},draw:function(t){var i=this._ctx;return i.globalCompositeOperation=t?"destination-out":"source-over",i.lineCap="round",this._drawOutline(i,t),t?this:(this._drawHotline(i),this)},getRGBForValue:function(t){var i=Math.min(Math.max((t-this._min)/(this._max-this._min),0),.999),e=4*Math.floor(256*i);return[this._palette[e],this._palette[e+1],this._palette[e+2]]},_drawOutline:function(t,i){var e,n,o,h,r,s,l,a;if(i||this._outlineWidth)for(e=0,o=this._data.length;e<o;e++)for(h=this._data[e],r=this._weight+2*this._outlineWidth,h._prevWidth=t.lineWidth=i?(h._prevWidth||r)+1:r,n=1,s=h.length;n<s;n++)l=h[n-1],a=h[n],t.strokeStyle=this._outlineColor,t.beginPath(),t.moveTo(l.x,l.y),t.lineTo(a.x,a.y),t.stroke()},_drawHotline:function(t){var i,e,n,o,h,r,s,l,a,u;for(t.lineWidth=this._weight,i=0,n=this._data.length;i<n;i++)for(o=this._data[i],e=1,h=o.length;e<h;e++)r=o[e-1],s=o[e],l=t.createLinearGradient(r.x,r.y,s.x,s.y),a=this.getRGBForValue(r.z),u=this.getRGBForValue(s.z),l.addColorStop(0,"rgb("+a.join(",")+")"),l.addColorStop(1,"rgb("+u.join(",")+")"),t.strokeStyle=l,t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(s.x,s.y),t.stroke()}};var o=i.Canvas.extend({_initContainer:function(){i.Canvas.prototype._initContainer.call(this),this._hotline=new n(this._container)},_update:function(){i.Canvas.prototype._update.call(this),this._hotline.width(this._container.width),this._hotline.height(this._container.height)},_updatePoly:function(t){var i=t._parts;i.length&&(this._updateOptions(t),this._hotline.data(i).draw(this._clear))},_updateOptions:function(t){null!==t.options.min&&this._hotline.min(t.options.min),null!==t.options.max&&this._hotline.max(t.options.max),null!==t.options.weight&&this._hotline.weight(t.options.weight),null!==t.options.outlineWidth&&this._hotline.outlineWidth(t.options.outlineWidth),null!==t.options.outlineColor&&this._hotline.outlineColor(t.options.outlineColor),t.options.palette&&this._hotline.palette(t.options.palette)}}),h=function(t){return i.Browser.canvas?new o(t):null},r={clipSegment:e},s=i.Polyline.extend({statics:{Renderer:o,renderer:h},options:{renderer:h(),min:0,max:1,palette:{0:"green",.5:"yellow",1:"red"},weight:5,outlineColor:"black",outlineWidth:1},getRGBForValue:function(t){return this._renderer._hotline.getRGBForValue(t)},_projectLatlngs:function(t,e,n){var o,h,r=t[0]instanceof i.LatLng,s=t.length;if(r){for(h=[],o=0;o<s;o++)h[o]=this._map.latLngToLayerPoint(t[o]),h[o].z=t[o].alt,n.extend(h[o]);e.push(h)}else for(o=0;o<s;o++)this._projectLatlngs(t[o],e,n)},_clipPoints:function(){if(this.options.noClip)return void(this._parts=this._rings);this._parts=[];var t,i,e,n,o,h,s,l=this._parts,a=this._renderer._bounds;for(t=0,e=0,n=this._rings.length;t<n;t++)for(s=this._rings[t],i=0,o=s.length;i<o-1;i++)h=r.clipSegment(s[i],s[i+1],a,i,!0),h&&(l[e]=l[e]||[],l[e].push(h[0]),h[1]===s[i+1]&&i!==o-2||(l[e].push(h[1]),e++))},_clickTolerance:function(){return this.options.weight/2+this.options.outlineWidth+(i.Browser.touch?10:0)}}),l=function(t,i){return new s(t,i)};/*
 (c) 2015, iosphere GmbH
 Leaflet.hotline, a Leaflet plugin for drawing gradients along polylines.
 https://github.com/iosphere/Leaflet.hotline/
*/
i.Hotline=s,i.hotline=l,t.L=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=leaflet.hotline.js.map
